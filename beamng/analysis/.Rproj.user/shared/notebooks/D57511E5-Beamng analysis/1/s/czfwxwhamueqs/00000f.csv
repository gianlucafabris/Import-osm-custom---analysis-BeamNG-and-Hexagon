"0","library(dplyr)"
"2","
Caricamento pacchetto: ‘dplyr’

"
"2","I seguenti oggetti sono mascherati da ‘package:stats’:

    filter, lag

"
"2","I seguenti oggetti sono mascherati da ‘package:base’:

    intersect, setdiff, setequal, union

"
"0","library(reticulate)"
"0","library(ggplot2)"
"0","library(grid)"
"0","library(gridExtra)"
"2","
Caricamento pacchetto: ‘gridExtra’

"
"2","Il seguente oggetto è mascherato da ‘package:dplyr’:

    combine

"
"0","raw = read.csv(""data/importosm_raw.csv"", header = TRUE, sep = "","")"
"0","raw2 = read.csv(""data/importosm_raw2.csv"", header = TRUE, sep = "","")"
"0","custom = read.csv(""data/importosm_custom.csv"", header = TRUE, sep = "","")"
"0","custom2 = read.csv(""data/importosm_custom2.csv"", header = TRUE, sep = "","")"
"0","custom_elevation = read.csv(""data/importosm_custom_elevation.csv"", header = TRUE, sep = "","")"
"0","custom_elevation2 = read.csv(""data/importosm_custom_elevation2.csv"", header = TRUE, sep = "","")"
"0",""
"0","# rename columns, merge data and align data"
"0","names(raw) = c(""time"", ""position_x"", ""position_y"", ""position_z"", ""speed"", ""rpm"", ""position_r"", ""position_p"", ""position_h"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null"")"
"0","names(raw2) = c(""time"", ""throttle"", ""steering"", ""cluch"", ""parkingbrake"", ""brake"", ""null"")"
"0","names(custom) = c(""time"", ""position_x"", ""position_y"", ""position_z"", ""speed"", ""rpm"", ""position_r"", ""position_p"", ""position_h"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null"")"
"0","names(custom2) = c(""time"", ""throttle"", ""steering"", ""cluch"", ""parkingbrake"", ""brake"", ""null"")"
"0","names(custom_elevation) = c(""time"", ""position_x"", ""position_y"", ""position_z"", ""speed"", ""rpm"", ""position_r"", ""position_p"", ""position_h"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null"")"
"0","names(custom_elevation2) = c(""time"", ""throttle"", ""steering"", ""cluch"", ""parkingbrake"", ""brake"", ""null"")"
"0",""
"0","raw = raw[, !(names(raw) %in% c(""speed"", ""rpm"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null""))]"
"0","raw2 = raw2[, !(names(raw2) %in% c(""throttle"", ""cluch"", ""parkingbrake"", ""brake"", ""null""))]"
"0","custom = custom[, !(names(custom) %in% c(""speed"", ""rpm"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null""))]"
"0","custom2 = custom2[, !(names(custom2) %in% c(""throttle"", ""cluch"", ""parkingbrake"", ""brake"", ""null""))]"
"0","custom_elevation = custom_elevation[, !(names(custom_elevation) %in% c(""speed"", ""rpm"", ""temp_water"", ""speed2"", ""stering_wheel_rotation"", ""throttle"", ""brake"", ""cluch"", ""speed_air"", ""speed_airflow"", ""altitude"", ""reverse"", ""throttle2"", ""null""))]"
"0","custom_elevation2 = custom_elevation2[, !(names(custom_elevation2) %in% c(""throttle"", ""cluch"", ""parkingbrake"", ""brake"", ""null""))]"
"0",""
"0","raw = merge(raw, raw2, by = ""time"", all = FALSE)"
"0","rm(raw2)"
"0","custom = merge(custom, custom2, by = ""time"", all = FALSE)"
"0","rm(custom2)"
"0","custom_elevation = merge(custom_elevation, custom_elevation2, by = ""time"", all = FALSE)"
"0","rm(custom_elevation2)"
"0",""
"0","# adding missing data and data normalization"
"0","raw = raw %>% mutate("
"0","  dist_planar = cumsum(c(0, sapply(2:nrow(raw), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2)"
"0","  }))),"
"0","  dist_spatial = cumsum(c(0, sapply(2:nrow(raw), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2 + (position_z[i] - position_z[i-1])^2)"
"0","  })))"
"0",")"
"0","custom = custom %>% mutate("
"0","  dist_planar = cumsum(c(0, sapply(2:nrow(custom), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2)"
"0","  }))),"
"0","  dist_spatial = cumsum(c(0, sapply(2:nrow(custom), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2 + (position_z[i] - position_z[i-1])^2)"
"0","  })))"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  dist_planar = cumsum(c(0, sapply(2:nrow(custom_elevation), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2)"
"0","  }))),"
"0","  dist_spatial = cumsum(c(0, sapply(2:nrow(custom_elevation), function(i){"
"0","    sqrt((position_x[i] - position_x[i-1])^2 + (position_y[i] - position_y[i-1])^2 + (position_z[i] - position_z[i-1])^2)"
"0","  })))"
"0",")"
"0",""
"0","raw$dist_planar = raw$dist_planar - min(unlist(raw$dist_planar))"
"0","raw$dist_spatial = raw$dist_spatial - min(unlist(raw$dist_spatial))"
"0","custom$dist_planar = custom$dist_planar - min(unlist(custom$dist_planar))"
"0","custom$dist_spatial = custom$dist_spatial - min(unlist(custom$dist_spatial))"
"0","custom_elevation$dist_planar = custom_elevation$dist_planar - min(unlist(custom_elevation$dist_planar))"
"0","custom_elevation$dist_spatial = custom_elevation$dist_spatial - min(unlist(custom_elevation$dist_spatial))"
"0",""
"0","raw = raw %>% mutate("
"0","  speed_x = c(NA, diff(position_x) / diff(time)),"
"0","  speed_y = c(NA, diff(position_y) / diff(time)),"
"0","  speed_z = c(NA, diff(position_z) / diff(time)),"
"0","  speed_planar = sqrt((speed_x)^2 + (speed_y)^2),"
"0","  speed_spatial = sqrt((speed_x)^2 + (speed_y)^2 + (speed_z)^2),"
"0","  speed_r = c(NA, diff(position_r) / diff(time)),"
"0","  speed_p = c(NA, diff(position_p) / diff(time)),"
"0","  speed_h = c(NA, diff(position_h) / diff(time))"
"0",")"
"0","custom = custom %>% mutate("
"0","  speed_x = c(NA, diff(position_x) / diff(time)),"
"0","  speed_y = c(NA, diff(position_y) / diff(time)),"
"0","  speed_z = c(NA, diff(position_z) / diff(time)),"
"0","  speed_planar = sqrt((speed_x)^2 + (speed_y)^2),"
"0","  speed_spatial = sqrt((speed_x)^2 + (speed_y)^2 + (speed_z)^2),"
"0","  speed_r = c(NA, diff(position_r) / diff(time)),"
"0","  speed_p = c(NA, diff(position_p) / diff(time)),"
"0","  speed_h = c(NA, diff(position_h) / diff(time))"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  speed_x = c(NA, diff(position_x) / diff(time)),"
"0","  speed_y = c(NA, diff(position_y) / diff(time)),"
"0","  speed_z = c(NA, diff(position_z) / diff(time)),"
"0","  speed_planar = sqrt((speed_x)^2 + (speed_y)^2),"
"0","  speed_spatial = sqrt((speed_x)^2 + (speed_y)^2 + (speed_z)^2),"
"0","  speed_r = c(NA, diff(position_r) / diff(time)),"
"0","  speed_p = c(NA, diff(position_p) / diff(time)),"
"0","  speed_h = c(NA, diff(position_h) / diff(time))"
"0",")"
"0",""
"0","raw = raw %>% mutate("
"0","  acceleration_x = c(NA, diff(speed_x) / diff(time)),"
"0","  acceleration_y = c(NA, diff(speed_y) / diff(time)),"
"0","  acceleration_z = c(NA, diff(speed_z) / diff(time)),"
"0","  acceleration_planar = sqrt((acceleration_x)^2 + (acceleration_y)^2),"
"0","  acceleration_spatial = sqrt((acceleration_x)^2 + (acceleration_y)^2 + (acceleration_z)^2),"
"0","  acceleration_r = c(NA, diff(speed_r) / diff(time)),"
"0","  acceleration_p = c(NA, diff(speed_p) / diff(time)),"
"0","  acceleration_h = c(NA, diff(speed_h) / diff(time))"
"0",")"
"0","custom = custom %>% mutate("
"0","  acceleration_x = c(NA, diff(speed_x) / diff(time)),"
"0","  acceleration_y = c(NA, diff(speed_y) / diff(time)),"
"0","  acceleration_z = c(NA, diff(speed_z) / diff(time)),"
"0","  acceleration_planar = sqrt((acceleration_x)^2 + (acceleration_y)^2),"
"0","  acceleration_spatial = sqrt((acceleration_x)^2 + (acceleration_y)^2 + (acceleration_z)^2),"
"0","  acceleration_r = c(NA, diff(speed_r) / diff(time)),"
"0","  acceleration_p = c(NA, diff(speed_p) / diff(time)),"
"0","  acceleration_h = c(NA, diff(speed_h) / diff(time))"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  acceleration_x = c(NA, diff(speed_x) / diff(time)),"
"0","  acceleration_y = c(NA, diff(speed_y) / diff(time)),"
"0","  acceleration_z = c(NA, diff(speed_z) / diff(time)),"
"0","  acceleration_planar = sqrt((acceleration_x)^2 + (acceleration_y)^2),"
"0","  acceleration_spatial = sqrt((acceleration_x)^2 + (acceleration_y)^2 + (acceleration_z)^2),"
"0","  acceleration_r = c(NA, diff(speed_r) / diff(time)),"
"0","  acceleration_p = c(NA, diff(speed_p) / diff(time)),"
"0","  acceleration_h = c(NA, diff(speed_h) / diff(time))"
"0",")"
"0",""
"0","raw = raw %>% filter(time >= 1)"
"0","raw = raw %>% filter(time < 50 | (time >= 50 & speed_planar > 0.5))"
"0","custom = custom %>% filter(time >= 1)"
"0","custom = custom %>% filter(time < 50 | (time >= 50 & speed_planar > 0.5))"
"0","custom_elevation = custom_elevation %>% filter(time >= 1)"
"0","custom_elevation = custom_elevation %>% filter(time < 50 | (time >= 50 & speed_planar > 0.5))"
"0",""
"0","# position rad -> deg"
"0","raw = raw %>% mutate("
"0","  position_h_norm = (position_h * 180 / pi - 90) %% 360 - 180,"
"0","  position_p_norm = (position_p * 180 / pi - 90) %% 360 - 180,"
"0","  position_r_norm = (position_r * 180 / pi - 90) %% 360 - 180"
"0",")"
"0","custom = custom %>% mutate("
"0","  position_h_norm = (position_h * 180 / pi - 90) %% 360 - 180,"
"0","  position_p_norm = (position_p * 180 / pi - 90) %% 360 - 180,"
"0","  position_r_norm = (position_r * 180 / pi - 90) %% 360 - 180"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  position_h_norm = (position_h * 180 / pi - 90) %% 360 - 180,"
"0","  position_p_norm = (position_p * 180 / pi - 90) %% 360 - 180,"
"0","  position_r_norm = (position_r * 180 / pi - 90) %% 360 - 180"
"0",")"
"0",""
"0","# speed m/s -> km/h"
"0","raw = raw %>% mutate("
"0","  speed_x_norm = speed_x * 3.6,"
"0","  speed_y_norm = speed_y * 3.6,"
"0","  speed_z_norm = speed_z * 3.6,"
"0","  speed_planar_norm = speed_planar * 3.6,"
"0","  speed_spatial_norm = speed_spatial * 3.6"
"0",")"
"0","custom = custom %>% mutate("
"0","  speed_x_norm = speed_x * 3.6,"
"0","  speed_y_norm = speed_y * 3.6,"
"0","  speed_z_norm = speed_z * 3.6,"
"0","  speed_planar_norm = speed_planar * 3.6,"
"0","  speed_spatial_norm = speed_spatial * 3.6"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  speed_x_norm = speed_x * 3.6,"
"0","  speed_y_norm = speed_y * 3.6,"
"0","  speed_z_norm = speed_z * 3.6,"
"0","  speed_planar_norm = speed_planar * 3.6,"
"0","  speed_spatial_norm = speed_spatial * 3.6"
"0",")"
"0",""
"0","# acceleration m/s^2 -> G"
"0","raw = raw %>% mutate("
"0","  acceleration_x_norm = acceleration_x / 9.81,"
"0","  acceleration_y_norm = acceleration_y / 9.81,"
"0","  acceleration_z_norm = acceleration_z / 9.81,"
"0","  acceleration_planar_norm = acceleration_planar / 9.81,"
"0","  acceleration_spatial_norm = acceleration_spatial / 9.81"
"0",")"
"0","custom = custom %>% mutate("
"0","  acceleration_x_norm = acceleration_x / 9.81,"
"0","  acceleration_y_norm = acceleration_y / 9.81,"
"0","  acceleration_z_norm = acceleration_z / 9.81,"
"0","  acceleration_planar_norm = acceleration_planar / 9.81,"
"0","  acceleration_spatial_norm = acceleration_spatial / 9.81"
"0",")"
"0","custom_elevation = custom_elevation %>% mutate("
"0","  acceleration_x_norm = acceleration_x / 9.81,"
"0","  acceleration_y_norm = acceleration_y / 9.81,"
"0","  acceleration_z_norm = acceleration_z / 9.81,"
"0","  acceleration_planar_norm = acceleration_planar / 9.81,"
"0","  acceleration_spatial_norm = acceleration_spatial / 9.81"
"0",")"
"0",""
"0","#adding distance from reference line (approximated) and importing road (for visualization) (exact)"
